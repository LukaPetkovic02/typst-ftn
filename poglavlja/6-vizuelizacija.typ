= Визуелизација

== Мотивација и циљ

Резултати симулација добијени у овом раду иницијално се чувају у облику *CSV фајлова*, 
који садрже нумеричке вредности параметара система у сваком временском кораку интеграције. 
Сваки ред у овом фајлу представља једно стање система у времену, дефинисано следећим пољима:
_t_ - протекло време, _θ₁, θ₂, ω₁, ω₂_, _energy_ - укупна енергија система

Пример садржаја оваквог фајла приказан је у табели @tbl:csv_example:

#figure(
table(
columns: 6,
align: (col, row) => (left,left,left,left,left,left).at(col),
inset: 6pt,
[t], [θ₁], [ω₁], [θ₂], [ω₂], [energy],
[0.00], [1.57], [0.00], [1.58], [0.00], [0.10],
[0.001], [1.57], [-0.01], [1.58], [0.00], [0.10],
[0.002], [1.57], [-0.02], [1.58], [0.00], [0.10],
[0.003], [1.57], [-0.03], [1.58], [0.00], [0.10]
),
caption: [Пример првих пар редова CSV табела који описују стање двоструког клатна.]
)<tbl:csv_example>

Иако овакав нумерички приказ пружа све потребне информације о стању система, он не омогућава фин приказ динамике покрета. 
Вредности углова и брзина саме по себи не приказују визуелно сложену путању коју прави двоструко клатно, нити откривају хаотичну природу његовог кретања.

Због тога је *визуелизација* веома важна - омогућава да резултате симулације прикажемо графички, односно да посматрамо стварно кретање система током времена. 
На овај начин можемо лакше уочити карактеристичне обрасце као што су периодично, полупериодично или хаотично кретање, као и визуелно проверити физичку исправност решења.

== Приказ трајекторије двоструког клатна

За визуелизацију резултата симулације развијен је програмски модул у језику *Rust*, који користи библиотеку `plotters` за генерисање графичких приказа.
Овај модул чита CSV фајлове са нумеричким вредностима добијеним из симулације и на основу углова θ₁ и θ₂ рачуна координате положаја сваке масе у систему.

Координате се рачунају помоћу углова на следећи начин:
$ x_1 = l_1 sin(θ_1) $
$ y_1 = -l_1 cos(θ_1) $
$ x_2 = x_1 + l_2 sin(θ_2) $
$ y_2 = y_1 - l_2 cos(θ_2) $

Програм затим црта путање обе масе током 60 секунди. На графику @fig:pendulum_plot су плава линија (путања прве масе) и црвена линија (путања друге масе), што омогућава јасан увид у динамику система.
#figure(
image("../slike/pendulum_plot.png", width: 90%),
caption: [Трајекторије горње и доње масе двоструког клатна.]
)<fig:pendulum_plot>

== Анимација кретања двоструког клатна

Поред статичког приказа путање, у оквиру овог рада реализована је и *динамичка визуелизација* - анимација кретања двоструког клатна у времену.
Такође је коришћен _Rust_ уз `plotters` библиотеку. Програм на исти начин као и пре рачуна положаје обе масе у простору, и у сваком временском
кораку црта тренутни положај система. На крају је цела анимација сачувана
у GIF формату.

#figure(
image("../slike/pendulum_animation.png", width: 90%),
caption: [Приказ једног кадра из анимације двоструког клатна.]
)<fig:pendulum_animation>

На сваком кадру (слика @fig:pendulum_animation) приказане су:
- позиције обе масе (плава и црвена)
- линије које представљају кракове клатна
- *тренутне вредности енергија* у горњем левом делу слике (потенцијална, кинетичка и укупна)

На анимацији се може видети да укупна енергија система остаје приближно *константна*, што потврђује нумеричку стабилност RK4 шеме.
Један од кључних ефеката анимације је *ефекат трага* (_fade-out_). Наиме, на сваком кораку чува се одређени број претходних положаја 
доње масе, који се приказују постепено све блеђим нијансама црвене боје. Помоћу овог ефекта можемо интуитивно, чак и само уз помоћ
слике одредити смер кретања клатна.